# Survey Header Configuration

## Current behavior

- **Template header fields**: Each survey record now uses plain-text `Survey_Header__c` (heading) and `Survey_Subheader__c` (subheading) values. The Apex `SurveyTakerController.getSurveyData` seeds the invitation header from the template heading when no invitation metadata is provided, and the LWC renders both fields without honoring any inline styles.【F:force-app/main/default/classes/SurveyTakerController.cls†L115-L134】【F:force-app/main/default/objects/Survey**c/fields/Survey_Header**c.field-meta.xml†L3-L9】【F:force-app/main/default/objects/Survey**c/fields/Survey_Subheader**c.field-meta.xml†L3-L10】
- **Invitation-driven context**: When respondents enter through an invitation token, `SurveyTakerController.getSurveyDataByToken` still delivers `EventTopic__c` and `EventDate__c` so the component can render topic/date-aware messaging.【F:force-app/main/default/classes/SurveyTakerController.cls†L567-L596】
- **Template cloning and guest access**: Bulk template cloning now preserves both header fields and other layout settings, and guest survey retrieval exposes the subheader so the respondent view matches authenticated users.【F:force-app/main/default/classes/SurveyUtilities.cls†L73-L112】【F:force-app/main/default/classes/ViewSurveyControllerWithoutSharing.cls†L47-L74】
- **Template rendering**: The Survey Taker LWC applies `{Topic}/{Date}/{Name}` tokens to the plain-text header/subheader values before rendering inside the fixed layout. If no header content exists, it falls back to the canonical “We value your feedback!!!” heading and the dynamic “Please take a moment…” subheading derived from topic/date metadata.【F:force-app/main/default/lwc/surveyTaker/surveyTaker.js†L90-L132】

## How to set headers dynamically

1. **Define the template header**: On the survey template record (Survey**c), fill `Survey_Header**c`(heading) and`Survey_Subheader**c` (subheading) with the desired default messages. These fields render as plain text so typography stays aligned with the component styling.【F:force-app/main/default/objects/Survey**c/fields/Survey_Header**c.field-meta.xml†L3-L9】【F:force-app/main/default/objects/Survey**c/fields/Survey_Subheader\_\_c.field-meta.xml†L3-L10】【F:force-app/main/default/classes/SurveyTakerController.cls†L130-L134】
2. **Pass event details with invitations**: When generating invitations (single or bulk), populate `EventTopic__c` and `EventDate__c` via the `eventTopic` and `eventDate` parameters on the Apex `createInvitation` / `createBulkInvitations` methods. These values are used to craft the topic/date-aware header shown to respondents.【F:force-app/main/default/classes/SurveyInvitationController.cls†L128-L210】【F:force-app/main/default/objects/SurveyInvitation**c/fields/EventTopic**c.field-meta.xml†L3-L11】【F:force-app/main/default/objects/SurveyInvitation**c/fields/EventDate**c.field-meta.xml†L3-L9】
3. **Fallback logic**: If neither invitation nor template header is provided, the subheading gracefully falls back to "Please take a moment to complete the evaluation survey for {Survey Name}." ensuring a consistent prompt even without additional metadata.【F:force-app/main/default/lwc/surveyTaker/surveyTaker.js†L144-L168】

## Recommendations

- **Standardize template headers**: Add the canonical topic/date-agnostic message to `Survey_Header__c` (and any template-specific detail to `Survey_Subheader__c`) on your Survey templates so cloned surveys inherit consistent branding and instructional text by default.
- **Include event metadata when issuing invitations**: Supply `EventTopic__c` and `EventDate__c` on invitations to render "Topic on Date" automatically in the respondent view without modifying the template per event.
- **Use tokens for dynamic text**: Author template headers with `{Topic}`, `{Date}`, or `{Name}` placeholders to keep dynamic values flowing even when customizing wording. Content is rendered as plain text, so the LWC preserves the shared typography and layout without allowing inline style overrides.【F:force-app/main/default/lwc/surveyTaker/surveyTaker.js†L90-L132】
